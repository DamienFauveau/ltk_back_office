{% extends "base.html" %}
{% block title %}
    List artwork mode admin
{% endblock %}
{% block content %}
    <h2>Toutes les oeuvres d'arts mode admin</h2>    
    <a class="btn btn-primary" href="{% url 'artworks:artwork_new' %}" role="button">Ajouter une oeuvre</a>

    <table id="artwork_table" class="display">
        <thead>
            <tr>
                <th>Id</th>
                <th>Nom de l'oeuvre</th>
                <th>Nom de l'artiste</th>                   
            </tr>
        </thead>
        <tbody>
            {% for artwork in artworks %}
            <tr>
                <th>{{ artwork.id }}</th>
                <th>{{ artwork.name }}</th>
                <th>{{ artwork.artist.name }}</th>           
            </tr>                    
            {% endfor %}
        </tbody>
    </table>
    
    <script>
        $(document).ready(function() {                   
            var artwork_table = $('#artwork_table').DataTable({
                "columnDefs": [
                    {
                        "targets": [ 0 ],
                        "visible": false,
                        "searchable": false
                    }
                ]
            });
            $('#artwork_table tbody').on('click', 'tr', function () {
                var data = artwork_table.row( this ).data();
                var id = data[0];
                console.log(document.location);
                document.location.pathname = `artworks/update-artwork-${id}/`;
             });
        });
    </script>
{% endblock content %}